(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{388:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},389:function(e,t,r){"use strict";var n=r(2),o=r(390).trim;n({target:"String",proto:!0,forced:r(391)("trim")},{trim:function(){return o(this)}})},390:function(e,t,r){var n=r(18),o="["+r(388)+"]",c=RegExp("^"+o+o+"*"),d=RegExp(o+o+"*$"),l=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(c,"")),2&e&&(r=r.replace(d,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},391:function(e,t,r){var n=r(5),o=r(388);e.exports=function(e){return n((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},537:function(e,t,r){var content=r(569);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(21).default)("5769b0ce",content,!0,{sourceMap:!1})},568:function(e,t,r){"use strict";r(537)},569:function(e,t,r){var n=r(20)(!1);n.push([e.i,'.search-form[data-v-1f931848]{border:1px solid #ddd;border-top:none;width:360px;height:350px;box-sizing:border-box}.search-tab[data-v-1f931848]{cursor:pointer}.search-tab span[data-v-1f931848]{display:block;flex:1;text-align:center;height:48px;line-height:42px;box-sizing:border-box;border-top:3px solid #eee;background:#eee}.search-tab .active[data-v-1f931848]{border-top-color:orange;background:#fff}.search-tab i[data-v-1f931848]{margin-right:5px;font-size:18px}.search-tab i[data-v-1f931848]:first-child{font-size:16px}.search-form-content[data-v-1f931848]{padding:15px 50px 15px 15px;position:relative}.search-form-content .el-autocomplete[data-v-1f931848]{width:100%}.reverse[data-v-1f931848]{position:absolute;top:35px;right:15px}.reverse[data-v-1f931848]:after,.reverse[data-v-1f931848]:before{display:block;content:"";position:absolute;left:-35px;width:25px;height:1px;background:#ccc}.reverse[data-v-1f931848]:after{top:0}.reverse[data-v-1f931848]:before{top:60px}.reverse span[data-v-1f931848]{display:block;position:absolute;top:20px;right:0;font-size:12px;background:#999;color:#fff;width:20px;height:20px;line-height:18px;text-align:center;border-radius:2px;cursor:pointer}.reverse span[data-v-1f931848]:after,.reverse span[data-v-1f931848]:before{display:block;content:"";position:absolute;left:10px;width:1px;height:20px;background:#ccc}.reverse span[data-v-1f931848]:after{top:-20px}.reverse span[data-v-1f931848]:before{top:20px}',""]),e.exports=n},630:function(e,t,r){"use strict";r.r(t);var n=r(7),o=(r(67),r(29),r(389),r(11),r(53),r(52),r(64),{data:function(){return{form:{departCity:"",departCode:"",destCity:"",destCode:"",departDate:""},rules:{departCity:[{required:!0,message:"请选择出发城市",trigger:"abc"}],destCity:[{required:!0,message:"请选择到达城市",trigger:"abc"}],departDate:[{required:!0,message:"请选择出发日期",trigger:"abc"}]},tabs:[{icon:"iconfont icondancheng",name:"单程"},{icon:"iconfont iconshuangxiang",name:"往返"}],currentTab:0,pickerOptions:{disabledDate:function(time){return time.getTime()+864e5<Date.now()}},departCities:[],destCities:[]}},methods:{handleSearchTab:function(e,t){"往返"===e.name&&this.$message.warning("往返功能暂未开放")},queryDepartSearch:function(e,t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.trim()){n.next=3;break}return t([]),n.abrupt("return");case 3:return r.$refs.form.validateField("departCity"),n.next=6,r.queryRequest(e);case 6:r.departCities=n.sent,t(r.departCities);case 8:case"end":return n.stop()}}),n)})))()},queryDestSearch:function(e,t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.trim()){n.next=3;break}return t([]),n.abrupt("return");case 3:return r.$refs.form.validateField("destCity"),n.next=6,r.queryRequest(e);case 6:r.destCities=n.sent,t(r.destCities);case 8:case"end":return n.stop()}}),n)})))()},queryRequest:function(e){var t=this;return new Promise((function(r,n){t.$axios({url:"/airs/city",params:{name:e}}).then((function(e){var t=e.data.data.map((function(e){return e.value=e.name.replace("市",""),e}));r(t)}))}))},handleDepartSelect:function(e){this.form.departCode=e.sort},handleDestSelect:function(e){this.form.destCode=e.sort},handleDate:function(e){this.$refs.form.validateField("departDate")},handleReverse:function(){var e=this.form,t=e.departCity,r=e.destCity,n=e.departCode,o=e.destCode;this.form.departCity=r,this.form.destCity=t,this.form.departCode=o,this.form.destCode=n},handleDepartBlur:function(){this.departCities.length>0&&""!==this.form.departCity&&(this.form.departCity=this.departCities[0].value,this.form.departCode=this.departCities[0].sort)},handleDestBlur:function(){this.destCities.length>0&&""!==this.form.destCity&&(this.form.destCity=this.destCities[0].value,this.form.destCode=this.destCities[0].sort)},handleSubmit:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.$store.commit("air/setHistoryData",e.form),e.$router.push({path:"/air/flights",query:e.form}))}))}},mounted:function(){}}),c=(r(568),r(22)),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-form"},[r("el-row",{staticClass:"search-tab",attrs:{type:"flex"}},e._l(e.tabs,(function(t,n){return r("span",{key:n,class:{active:n===e.currentTab},on:{click:function(r){return e.handleSearchTab(t,n)}}},[r("i",{class:t.icon}),e._v(e._s(t.name)+"\n    ")])})),0),e._v(" "),r("el-form",{ref:"form",staticClass:"search-form-content",attrs:{rules:e.rules,"label-width":"80px",model:e.form}},[r("el-form-item",{attrs:{label:"出发城市",prop:"departCity"}},[r("el-autocomplete",{staticClass:"el-autocomplete",attrs:{"fetch-suggestions":e.queryDepartSearch,placeholder:"请搜索出发城市"},on:{select:e.handleDepartSelect,blur:e.handleDepartBlur},model:{value:e.form.departCity,callback:function(t){e.$set(e.form,"departCity",t)},expression:"form.departCity"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"到达城市",prop:"destCity"}},[r("el-autocomplete",{staticClass:"el-autocomplete",attrs:{"fetch-suggestions":e.queryDestSearch,placeholder:"请搜索到达城市"},on:{select:e.handleDestSelect,blur:e.handleDestBlur},model:{value:e.form.destCity,callback:function(t){e.$set(e.form,"destCity",t)},expression:"form.destCity"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"出发时间",prop:"departDate"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},on:{change:e.handleDate},model:{value:e.form.departDate,callback:function(t){e.$set(e.form,"departDate",t)},expression:"form.departDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:""}},[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSubmit}},[e._v("\n        搜索\n      ")])],1),e._v(" "),r("div",{staticClass:"reverse"},[r("span",{on:{click:e.handleReverse}},[e._v("换")])])],1)],1)}),[],!1,null,"1f931848",null);t.default=component.exports}}]);