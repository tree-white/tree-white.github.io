(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{621:function(t,e,n){var content=n(683);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("15c2c168",content,!0,{sourceMap:!1})},682:function(t,e,n){"use strict";n(621)},683:function(t,e,n){var r=n(20)(!1);r.push([t.i,".container[data-v-566c8b7d]{background:#f5f5f5;padding:30px 0}.container .main[data-v-566c8b7d]{width:1000px;margin:0 auto}.container .main .pay-title[data-v-566c8b7d]{text-align:right}.container .main .pay-title span[data-v-566c8b7d]{font-size:28px;color:#ff4500}.container .main .pay-main[data-v-566c8b7d]{background:#fff;margin-top:10px;border-top:5px solid orange;padding:30px}.container .main .pay-main h4[data-v-566c8b7d]{font-size:28px;font-weight:400;margin-bottom:10px}.container .main .pay-main .pay-qrcode[data-v-566c8b7d]{padding:0 80px}.container .main .pay-main .qrcode[data-v-566c8b7d]{border:1px solid #ddd;padding:15px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.container .main .pay-main .qrcode #qrcode-stage[data-v-566c8b7d]{width:200px;height:200px;margin-bottom:10px}.container .main .pay-main .qrcode p[data-v-566c8b7d]{line-height:2;text-align:center}",""]),t.exports=r},703:function(t,e,n){"use strict";n.r(e);var r=n(7),o=(n(67),n(79),n(52),n(64),n(661)),c=n.n(o),d={mounted:function(){var t=this;setTimeout(Object(r.a)(regeneratorRuntime.mark((function e(){var n,canvas;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios({url:"/airorders/"+t.$route.query.id,headers:{Authorization:"Bearer "+t.$store.state.user.userInfo.token}});case 2:n=e.sent,console.log(n),t.detail=n.data,canvas=document.querySelector("#qrcode-stage"),c.a.toCanvas(canvas,t.detail.payInfo.code_url,{width:250}),t.timer=setInterval(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios({url:"/airorders/checkpay",method:"POST",headers:{Authorization:"Bearer "+t.$store.state.user.userInfo.token},data:{id:t.detail.id,nonce_str:t.detail.price,out_trade_no:t.detail.orderNo}});case 2:"SUCCESS"===e.sent.data.trade_state&&(clearInterval(t.timer),t.$message.success("订单已完成支付"),t.$router.replace("/air"));case 4:case"end":return e.stop()}}),e)}))),2e3);case 8:case"end":return e.stop()}}),e)}))),0)},destroyed:function(){clearInterval(this.timer)},data:function(){return{detail:{},timer:null}}},l=(n(682),n(22)),component=Object(l.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"main"},[n("div",{staticClass:"pay-title"},[t._v("\n      支付总金额\n      "),n("span",{staticClass:"pay-price"},[t._v("￥ "+t._s(t.detail.price&&t.detail.price.toFixed(2)))])]),t._v(" "),n("div",{staticClass:"pay-main"},[n("h4",[t._v("微信支付")]),t._v(" "),n("el-row",{staticClass:"pay-qrcode",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("div",{staticClass:"qrcode"},[n("canvas",{attrs:{id:"qrcode-stage"}}),t._v(" "),n("p",[t._v("请使用微信扫一扫")]),t._v(" "),n("p",[t._v("扫描二维码支付")])]),t._v(" "),n("div",{staticClass:"pay-example"},[n("img",{attrs:{src:"http://157.122.54.189:9093/images/wx-sweep2.jpg",alt:""}})])])],1)])])}),[],!1,null,"566c8b7d",null);e.default=component.exports}}]);