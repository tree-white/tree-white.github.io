(window.webpackJsonp=window.webpackJsonp||[]).push([[30,8,9],{388:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},389:function(t,e,r){"use strict";var n=r(2),o=r(390).trim;n({target:"String",proto:!0,forced:r(391)("trim")},{trim:function(){return o(this)}})},390:function(t,e,r){var n=r(18),o="["+r(388)+"]",c=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(c,"")),2&t&&(r=r.replace(l,"")),r}};t.exports={start:d(1),end:d(2),trim:d(3)}},391:function(t,e,r){var n=r(5),o=r(388);t.exports=function(t){return n((function(){return!!o[t]()||"​᠎"!="​᠎"[t]()||o[t].name!==t}))}},555:function(t,e,r){var content=r(595);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(21).default)("f0a9e39e",content,!0,{sourceMap:!1})},556:function(t,e,r){var content=r(597);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(21).default)("ff09c4ae",content,!0,{sourceMap:!1})},594:function(t,e,r){"use strict";r(555)},595:function(t,e,r){var n=r(20)(!1);n.push([t.i,".air-column[data-v-78736cbd]{border-bottom:1px dashed #ddd;padding-bottom:20px;margin-bottom:20px}.air-column h2[data-v-78736cbd]{margin-bottom:20px;font-size:22px;font-weight:400}[data-v-78736cbd] .el-select .el-input{width:130px}.input-with-select[data-v-78736cbd]{width:590px}.input-with-select[data-v-78736cbd] .el-input-group__prepend{background-color:#fff}.member-info[data-v-78736cbd] .el-form-item{margin-bottom:0}.member-info[data-v-78736cbd] .el-form-item /deep/ .el-form-item__error{margin-top:10px;margin-left:130px}.member-info-item[data-v-78736cbd]{border-bottom:1px dashed #eee;padding-bottom:20px;position:relative}.add-member[data-v-78736cbd]{margin-top:20px}.delete-user[data-v-78736cbd]{display:block;background:#ddd;width:20px;height:20px;font-size:14px;text-align:center;line-height:18px;color:#fff;cursor:pointer;border-radius:50px;position:absolute;right:-30px;top:57%}.insurance>div[data-v-78736cbd]{margin-top:10px}.insurance-item[data-v-78736cbd]{margin-bottom:20px}.contact[data-v-78736cbd] .el-input{width:50%}.submit[data-v-78736cbd]{margin:50px auto;display:block;width:250px;height:50px}",""]),t.exports=n},596:function(t,e,r){"use strict";r(556)},597:function(t,e,r){var n=r(20)(!1);n.push([t.i,".aside[data-v-3344de38]{width:350px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;border:1px solid #ddd}.air-info[data-v-3344de38]{padding:15px}.air-info .info-top[data-v-3344de38]{margin-bottom:10px}.air-info .info-top>div[data-v-3344de38]:last-child{font-size:14px}.air-info .info-step .flight-airport strong[data-v-3344de38]{display:block;font-size:22px;font-weight:400}.air-info .info-step .flight-airport span[data-v-3344de38]{font-size:12px;color:#999}.air-info .info-step .flight-time[data-v-3344de38]{text-align:center;font-size:12px;color:#999}.air-info .info-step .flight-time span[data-v-3344de38]{display:block}.info-bar[data-v-3344de38]{border-top:1px dashed #ddd;padding:10px 15px;font-size:14px;color:#666;align-items:center}.info-bar .price[data-v-3344de38]{font-size:28px;color:orange}",""]),t.exports=n},616:function(t,e,r){var content=r(660);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(21).default)("14d83a29",content,!0,{sourceMap:!1})},642:function(t,e,r){"use strict";r.r(e);r(36),r(110),r(389),r(244);var n={computed:{allPriceCheckInsurances:function(){var t=this;if(!this.detail.seat_infos)return 0;var e=0,r=this.form.users.length,n=[];return e+=this.detail.seat_infos.org_settle_price*r,e+=this.detail.airport_tax_audlet*r,this.form.insurances.forEach((function(o){t.detail.insurances.forEach((function(t){o===t.id&&(e+=t.price*r,n.push({name:"".concat(t.type,"：￥").concat(t.price,"/份"),num:"x".concat(r)}))}))})),this.$emit("setData",{price:e,checkInsurances:n,people:r}),{price:e,checkInsurances:n,people:r}}},mounted:function(){var t=this,e=this.$route.query,r=e.id,n=e.seat_xid;this.form.air=r,this.form.seat_xid=n,this.$axios({url:"/airs/".concat(r),params:{id:r,seat_xid:n}}).then((function(e){console.log(e.data),t.$store.commit("air/setDetail",e.data),t.detail=e.data}))},data:function(){return{detail:{},form:{users:[{username:"",id:""}],insurances:[],contactName:"",contactPhone:"",captcha:"",invoice:!1,seat_xid:"",air:""},rules:{users:[{validator:function(t,e,r){console.log(e),e.every((function(t){var e=!0;return t.username.trim()?t.id.trim()?e:(e=!1,r(new Error("证件类型不能为空"))):(e=!1,r(new Error("乘机人信息不能为空")))}))&&r()},trigger:"blur"}],contactName:[{required:!0,message:"联系人姓名不能为空",trigger:"change"}],contactPhone:[{required:!0,message:"联系人手机号不能为空",trigger:"change"},{min:11,max:11,message:"手机号长度应为11位",trigger:"blur"}],captcha:[{required:!0,message:"短信验证码不能为空",trigger:"change"}]}}},methods:{handleInsurances:function(t){var e=this.form.insurances.indexOf(t);-1===e?this.form.insurances.push(t):this.form.insurances.splice(e,1)},handleAddUsers:function(){this.form.users.push({username:"",id:""})},handleDeleteUser:function(t){this.form.users.splice(t,1)},handleSendCaptcha:function(){var t=this,e=this.form.contactPhone.trim();e&&11===e.length?this.$store.dispatch("user/sendCaptcha",e).then((function(e){t.$message.success("验证码发送成功："+e)})):this.$refs.form.validateField("contactPhone")},handleSubmit:function(){var t=this;this.$refs.form.validate((function(e){e&&(console.log(t.form),t.$axios({url:"/airorders",method:"POST",data:t.form,headers:{Authorization:"Bearer "+t.$store.state.user.userInfo.token}}).then((function(e){var r=e.data.message;t.$message.success(r);var n=e.data.data.id;t.$router.push({path:"/air/pay",query:{id:n}}).then((function(t){console.log(t)}))})))}))}}},o=(r(594),r(22)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form}},[r("div",{staticClass:"air-column"},[r("h2",[t._v("剩机人")]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(t._s(t.allPriceCheckInsurances))]),t._v(" "),t._l(t.form.users,(function(e,n){return r("div",{key:n,staticClass:"member-info member-info-item"},[r("el-form-item",{attrs:{prop:"users"}},[r("el-form-item",{attrs:{label:"乘机人类型"}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"姓名"},model:{value:e.username,callback:function(r){t.$set(e,"username",r)},expression:"item.username"}},[r("el-select",{attrs:{slot:"prepend",value:"1",placeholder:"请选择"},slot:"prepend"},[r("el-option",{attrs:{label:"成人",value:"1"}})],1)],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"证件类型"}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"证件号码"},model:{value:e.id,callback:function(r){t.$set(e,"id",r)},expression:"item.id"}},[r("el-select",{attrs:{slot:"prepend",value:"1",placeholder:"请选择"},slot:"prepend"},[r("el-option",{attrs:{label:"身份证",value:"1",checked:!0}})],1)],1)],1),t._v(" "),0!==n?r("span",{staticClass:"delete-user",on:{click:function(e){return t.handleDeleteUser(n)}}},[t._v("—")]):t._e()],1)],1)})),t._v(" "),r("el-button",{staticClass:"add-member",attrs:{type:"primary"},on:{click:t.handleAddUsers}},[t._v("添加乘机人")])],2),t._v(" "),r("div",{staticClass:"air-column"},[r("h2",[t._v("保险")]),t._v(" "),r("div",t._l(t.detail.insurances,(function(e,n){return r("div",{key:n,staticClass:"insurance-item"},[r("el-checkbox",{attrs:{label:e.type+"：￥"+e.price+"/份×"+t.form.users.length+" 最高赔付"+e.compensation.replace("万","")+"万",border:""},on:{change:function(r){return t.handleInsurances(e.id)}}})],1)})),0)]),t._v(" "),r("div",{staticClass:"air-column"},[r("h2",[t._v("联系人")]),t._v(" "),r("div",{staticClass:"contact"},[r("el-form-item",{attrs:{label:"姓名","label-width":"80px",prop:"contactName"}},[r("el-input",{model:{value:t.form.contactName,callback:function(e){t.$set(t.form,"contactName",e)},expression:"form.contactName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"手机号","label-width":"80px",prop:"contactPhone"}},[r("el-input",{model:{value:t.form.contactPhone,callback:function(e){t.$set(t.form,"contactPhone",e)},expression:"form.contactPhone"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"验证码","label-width":"80px",prop:"captcha"}},[r("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:t.form.captcha,callback:function(e){t.$set(t.form,"captcha",e)},expression:"form.captcha"}},[r("template",{slot:"append"},[r("el-button",{on:{click:t.handleSendCaptcha}},[t._v("发送验证码")])],1)],2)],1),t._v(" "),r("el-button",{staticClass:"submit",attrs:{type:"warning"},on:{click:t.handleSubmit}},[t._v("提交订单")])],1)])])],1)}),[],!1,null,"78736cbd",null);e.default=component.exports},643:function(t,e,r){"use strict";r.r(e);r(52),r(166),r(110);var n={props:{data:{type:Object,default:{}},changeData:{type:Object,default:{}}},computed:{rankTime:function(){if(!this.data.dep_time)return"";var t=this.data.dep_time.split(":"),e=this.data.arr_time.split(":"),r=60*t[0]+ +t[1],n=60*e[0]+ +e[1],o=n-r;return o<0&&(o=n+1440-r),"".concat(Math.floor(o/60),"时").concat(o%60,"分")}}},o=(r(596),r(22)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"aside"},[r("div",{staticClass:"air-info"},[r("el-row",{staticClass:"info-top",attrs:{type:"flex",justify:"space-between"}},[r("div",[t._v(t._s(t.data.dep_date))]),t._v(" "),r("div",[t._v(t._s(t.data.org_city_name)+" - "+t._s(t.data.dst_city_name))])]),t._v(" "),r("el-row",{staticClass:"info-step",attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("el-col",{staticClass:"flight-airport",attrs:{span:5}},[r("strong",[t._v(t._s(t.data.dep_time))]),t._v(" "),r("span",[t._v(t._s(t.data.org_airport_name)+t._s(t.data.org_airport_quay))])]),t._v(" "),r("el-col",{staticClass:"flight-time",attrs:{span:14}},[r("span",[t._v("--- "+t._s(t.rankTime)+" ---")]),t._v(" "),r("span",[t._v(t._s(t.data.airline_name)+t._s(t.data.flight_no))])]),t._v(" "),r("el-col",{staticClass:"flight-airport",attrs:{span:5}},[r("strong",[t._v(t._s(t.data.arr_time))]),t._v(" "),r("span",[t._v("浦东机场T2")])])],1)],1),t._v(" "),r("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[r("span",[t._v("订单总价")]),t._v(" "),r("span",[t._v("金额")]),t._v(" "),r("span",[t._v("数量")])]),t._v(" "),r("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[r("span",[t._v("成人机票")]),t._v(" "),r("span",[t._v("￥"+t._s(t.data.seat_infos.org_settle_price))]),t._v(" "),r("span",[t._v("x"+t._s(t.changeData.people))])]),t._v(" "),r("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[r("span",[t._v("机建＋燃油")]),t._v(" "),r("span",[t._v("¥"+t._s(t.data.airport_tax_audlet)+"/人/单程")]),t._v(" "),r("span",[t._v("x"+t._s(t.changeData.people))])]),t._v(" "),0!==t.changeData.checkInsurances.length?r("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[r("span",[t._v("选择的保险")]),t._v(" "),r("span",t._l(t.changeData.checkInsurances,(function(e,n){return r("div",{key:n},[t._v("\n        "+t._s(e.name)+"\n      ")])})),0),t._v(" "),r("span",t._l(t.changeData.checkInsurances,(function(e,n){return r("div",{key:n},[t._v("\n        "+t._s(e.num)+"\n      ")])})),0)]):t._e(),t._v(" "),r("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("span",{staticStyle:{"font-size":"20px"}},[t._v("应付总额：")]),t._v(" "),r("span",{staticClass:"price"},[t._v("￥"+t._s(t.changeData.price)+" ")])])],1)}),[],!1,null,"3344de38",null);e.default=component.exports},659:function(t,e,r){"use strict";r(616)},660:function(t,e,r){var n=r(20)(!1);n.push([t.i,".container[data-v-6574cf0a]{width:1000px;margin:20px auto}.aside[data-v-6574cf0a]{width:350px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;border:1px solid #ddd}",""]),t.exports=n},702:function(t,e,r){"use strict";r.r(e);r(42),r(30),r(43),r(65),r(36),r(66);var n=r(23),o=r(642),c=r(643);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var d={components:{OrderForm:o.default,OrderAside:c.default},data:function(){return{allPriceCheckInsurances:{checkInsurances:[]}}},watch:{allPriceCheckInsurances:function(){console.log(this.allPriceCheckInsurances)}},methods:{getPriceCheckInsurances:function(data){this.allPriceCheckInsurances=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},data)}}},f=(r(659),r(22)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("el-row",{attrs:{type:"flex",justify:"space-between"}},[r("div",{staticClass:"main"},[r("OrderForm",{on:{setData:t.getPriceCheckInsurances}})],1),t._v(" "),r("div",{staticClass:"aside"},[t.$store.state.air.detail.seat_infos?r("OrderAside",{attrs:{data:t.$store.state.air.detail,changeData:t.allPriceCheckInsurances}}):t._e()],1)])],1)}),[],!1,null,"6574cf0a",null);e.default=component.exports}}]);