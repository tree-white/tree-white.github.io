(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{388:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},389:function(e,t,r){"use strict";var o=r(2),n=r(390).trim;o({target:"String",proto:!0,forced:r(391)("trim")},{trim:function(){return n(this)}})},390:function(e,t,r){var o=r(18),n="["+r(388)+"]",l=RegExp("^"+n+n+"*"),c=RegExp(n+n+"*$"),d=function(e){return function(t){var r=String(o(t));return 1&e&&(r=r.replace(l,"")),2&e&&(r=r.replace(c,"")),r}};e.exports={start:d(1),end:d(2),trim:d(3)}},391:function(e,t,r){var o=r(5),n=r(388);e.exports=function(e){return o((function(){return!!n[e]()||"​᠎"!="​᠎"[e]()||n[e].name!==e}))}},623:function(e,t,r){var content=r(688);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(21).default)("69152990",content,!0,{sourceMap:!1})},687:function(e,t,r){"use strict";r(623)},688:function(e,t,r){var o=r(20)(!1);o.push([e.i,'.container[data-v-da68876a]{width:1000px;margin:0 auto}[data-v-da68876a] .el-form-item{margin-bottom:0}[data-v-da68876a] .el-form-item h3{font-weight:400;font-size:22px}[data-v-da68876a] .el-form-item p{font-size:12px;color:#999}[data-v-da68876a] .el-form-item .send{margin:20px 0}[data-v-da68876a] .el-form-item .send .el-button{padding:8px 30px}[data-v-da68876a] .el-form-item .send span{margin:0 10px}[data-v-da68876a] .el-form-item .send em{color:#f90;cursor:pointer;padding:8px 10px}[data-v-da68876a] .el-form-item .send em:hover{background:#f90;color:#fff;border-radius:5px}.edit_container[data-v-da68876a]{margin:20px 0;line-height:1}.draft[data-v-da68876a]{margin:20px 0;padding:10px;border:1px solid #ccc;border-radius:5px;cursor:pointer}.draft[data-v-da68876a]:hover{background:#87ceeb;color:#fff}.draft:hover span[data-v-da68876a]{color:#fff}.draft span[data-v-da68876a]{color:#f90}[data-v-da68876a] .ql-editor{min-height:300px}[data-v-da68876a] .ql-snow .ql-tooltip[data-mode=link]:before{content:"请输入链接地址:"}[data-v-da68876a] .ql-snow .ql-tooltip.ql-editing a.ql-action:after{border-right:0;content:"保存";padding-right:0}[data-v-da68876a] .ql-snow .ql-tooltip[data-mode=video]:before{content:"请输入视频地址:"}[data-v-da68876a] .ql-snow .ql-picker.ql-size .ql-picker-item:before,[data-v-da68876a] .ql-snow .ql-picker.ql-size .ql-picker-label:before{content:"14px"}[data-v-da68876a] .ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]:before,[data-v-da68876a] .ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]:before{content:"10px"}[data-v-da68876a] .ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]:before,[data-v-da68876a] .ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]:before{content:"18px"}[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-item:before,[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-label:before{content:"文本"}[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-item[data-value="1"]:before,[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-label[data-value="1"]:before{content:"标题1"}[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-item[data-value="2"]:before,[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-label[data-value="2"]:before{content:"标题2"}[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-item[data-value="3"]:before,[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-label[data-value="3"]:before{content:"标题3"}[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-item[data-value="4"]:before,[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-label[data-value="4"]:before{content:"标题4"}[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-item[data-value="5"]:before,[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-label[data-value="5"]:before{content:"标题5"}[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-item[data-value="6"]:before,[data-v-da68876a] .ql-snow .ql-picker.ql-header .ql-picker-label[data-value="6"]:before{content:"标题6"}[data-v-da68876a] .ql-snow .ql-picker.ql-font .ql-picker-item:before,[data-v-da68876a] .ql-snow .ql-picker.ql-font .ql-picker-label:before{content:"标准字体"}[data-v-da68876a] .ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]:before,[data-v-da68876a] .ql-snow .ql-picker.ql-font .ql-picker-label[data-value=serif]:before{content:"衬线字体"}[data-v-da68876a] .ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before,[data-v-da68876a] .ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before{content:"等宽字体"}',""]),e.exports=o},705:function(e,t,r){"use strict";r.r(t);var o=r(23),n=r(7);r(67),r(389),r(53),r(29),r(52),r(64),r(42),r(30),r(43),r(65),r(36),r(66);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d=[["bold","italic","underline","strike"],[{header:1},{header:2}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["image","video"]],f={components:{},data:function(){return{title:"",city:"",formData:{content:"",title:"",city:""},rules:{title:[{required:!0,message:"标题不能为空",trigger:"change"}],city:[{required:!0,message:"需要选择一个城市",trigger:"change"}]},editorOption:{placeholder:"请输入正文",modules:{toolbar:d}}}},methods:{querySearchAsync:function(e,t){var r=e.trim();console.log(r),r&&this.$store.dispatch("hotel/searchCity",r).then((function(e){console.log(e);var r=e.map((function(e){return e.value=e.name,e}));t(r)})),t([])},handleSelect:function(e){console.log(e)},handleSend:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.formData.content.trim()){t.next=3;break}return e.$message.error("正文内容不能为空！"),t.abrupt("return");case 3:r=e.$store.state.user.userInfo.token,e.$refs.form.validate((function(t){t&&e.$axios({url:"/posts",method:"POST",headers:{Authorization:"Bearer "+r},data:e.formData}).then((function(t){console.log(t),e.$message.success("发布成功"),e.$router.replace("/post")}))}));case 5:case"end":return t.stop()}}),t)})))()},onEditorReady:function(e){},onEditorBlur:function(e){},onEditorFocus:function(e){},onEditorChange:function(e){e.quill;var html=e.html;e.text;this.formData.content=html},handleDraft:function(){var e=this;console.log("点击保存草稿"),this.formData.content.trim()?this.$refs.form.validate((function(t){if(t){var r=c(c({},e.formData),{},{create:+new Date});e.$store.commit("post/setDraft",r)}})):this.$message.error("正文内容不能为空！")}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}}},v=(r(687),r(22)),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:18}},[r("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules}},[r("el-form-item",[r("h3",[e._v("发表新攻略")])]),e._v(" "),r("el-form-item",[r("p",[e._v("分享你的个人游记，让更多人看到哦！")])]),e._v(" "),r("el-form-item",{attrs:{prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),e._v(" "),r("el-form-item",[r("client-only",[r("div",{staticClass:"edit_container"},[r("quill-editor",{ref:"myQuillEditor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1)])],1),e._v(" "),r("el-form-item",{attrs:{prop:"city"}},[r("div",{staticClass:"checkCity"},[r("span",[e._v("选择城市")]),e._v(" "),r("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请搜索游玩城市"},on:{select:e.handleSelect},model:{value:e.formData.city,callback:function(t){e.$set(e.formData,"city",t)},expression:"formData.city"}})],1)]),e._v(" "),r("el-form-item",[r("div",{staticClass:"send"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleSend}},[e._v("发 布")]),e._v(" "),r("span",[e._v("或者")]),e._v(" "),r("em",{on:{click:e.handleDraft}},[e._v("保存到草稿")])],1)])],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"draft"},[e._v("\n        草稿箱 ( "),r("span",[e._v(e._s(e.$store.state.post.drafts.length||0))]),e._v(" )\n      ")])])],1)],1)}),[],!1,null,"da68876a",null);t.default=component.exports}}]);